<!DOCTYPE html>
<html>

<link rel="stylesheet" href="style.css">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="jquery.min.js"></script>
</head>

<body>
    <div id="End">
        <div class="stats">
            <h2>
            </h2>
            <div id="timing">
                <h2 class="timing_set">Süreyi belirleyin </h2>
                <input class="timing_set timing_button" id="dk" type="tel" value="1">
                <h2 class="timing_set">:</h2>
                <input class="timing_set timing_button" id="sn" type="tel" value="00">
            </div>
            <h2>
            </h2>
        </div>
        <div class="stats">
            <h2>
            </h2>
            <h2 id="score_end">Puan 0
            </h2>
            <h2>
            </h2>
        </div>
        <div class="stats">
            <h2>
            </h2>
            <button id="restart" type="button" class="answer_end">
                Tekrar Oyna
            </button>
            <h2>
            </h2>
        </div>
        <h2>
            Hangi sayılardan soru gelsin?
        </h2>
        <div class="options">
            <input type="checkbox" id="one" name="1" checked="True" class="whichnumbers">
            <label for="1"> 1 </label>
            <input type="checkbox" id="two" name="2" checked="True" class="whichnumbers">
            <label for="2"> 2 </label>
            <input type="checkbox" id="three" name="3" checked="True" class="whichnumbers">
            <label for="3"> 3</label>
            <input type="checkbox" id="four" name="4" checked="True" class="whichnumbers">
            <label for="4"> 4 </label>
            <input type="checkbox" id="five" name="5" checked="True" class="whichnumbers">
            <label for="5"> 5 </label>
            <input type="checkbox" id="six" name="6" class="whichnumbers">
            <label for="6"> 6</label>
            <input type="checkbox" id="seven" name="7" class="whichnumbers">
            <label for="7"> 7 </label>
            <input type="checkbox" id="eigth" name="8" class="whichnumbers">
            <label for="8"> 8 </label>
            <input type="checkbox" id="nine" name="9" class="whichnumbers">
            <label for="9"> 9</label>
            <input type="checkbox" id="ten" name="10" class="whichnumbers">
            <label for="10"> 10</label>
        </div>
        <h2>
            Kaç şık olsun?
        </h2>
        <div class="options">
            <input type="radio" id="3Option" name="HowManyOptions" checked="True" class="numberofoptions">
            <label for="3Option"> 3 </label>
            <input type="radio" id="4Option" name="HowManyOptions" class="numberofoptions">
            <label for="4Option"> 4 </label>
            <input type="radio" id="5Option" name="HowManyOptions" class="numberofoptions">
            <label for="5Option"> 5</label>
        </div>

    </div>
    <div id="Game" hidden>
        <div class="stats">
            <button id="finish_game" name="finish" type="button" class="answer">Bitir</button>
            <h2 id="score">Puan 0
            </h2>
            <h2 id="timer">2:00
            </h2>
        </div>
        <div id="question_body">
            <div id="question">
                <h2>
                </h2>
                <h2 id="quest">56
                </h2>
                <h2>
                </h2>
            </div>

            <div id="answers">
                <button id="2" name="2" type="button" class="answer">A) 5</button>
                <button id="3" name="3" type="button" class="answer">B) 10</button>
                <button id="4" name="4" type="button" class="answer">C) 15</button>
                <button id="5" name="5" type="button" class="answer three" hidden>D)25</button>
                <button id="6" name="6" type="button" class="answer three four" hidden>E)35</button>
            </div>
        </div>
    </div>
    <div id="config">

    </div>
    <script type="text/javascript">

        var correctaudio = new Audio('correct.mp3');
        var wrong = new Audio('wrong.mp3');

        var numbers = [];
        var seconds = 120;
        var second_def = 60;
        var available_numbers = [1, 2, 3, 4, 5];
        var number_of_options = 3;
        var points = 0;
        var correct = 0;
        var i = 0;

        function ran(start, end) {
            return Math.floor(Math.random() * (end - start)) + start;
        }

        function gen() {
            numbers = [];
            const first = available_numbers[ran(0, available_numbers.length)];
            const second = ran(1, 10);
            for (var i = 0; i < 4; i++) {
                const first_loop = available_numbers[ran(0, available_numbers.length)];
                const second_loop = ran(1, 10);
                const index = numbers.indexOf(first_loop * second_loop);
                if (!(index > -1 || first * second == first_loop * second_loop))
                    numbers.push(first_loop * second_loop);
                else
                    i--;
            }
            numbers.splice(0, 0, first);
            numbers.splice(1, 0, second);
            const index = ran(0, number_of_options) + 2;
            correct = index;
            numbers.splice(index, 0, first * second);
            write();
        }

        function write() {
            $('#quest').text(numbers[0] + ' x ' + numbers[1]);
            $('#2').text(numbers[2]);
            $('#3').text(numbers[3]);
            $('#4').text(numbers[4]);
            $('#5').text(numbers[5]);
            $('#6').text(numbers[6]);
        }

        function timeUp() {
            $('#score_end').text('Puan ' + points);
            $('#Game').hide();
            $('#End').show();
        }

        function Restart() {
            $('#Game').show();
            $('#End').hide();
            seconds = second_def;
            points = 0;
            if ((seconds % 60) / 10 >= 1)
                $('#timer').text(Math.floor(seconds / 60) + ':' + (seconds % 60));
            else
                $('#timer').text(Math.floor(seconds / 60) + ':0' + (seconds % 60));
            $('#score').text('Puan ' + points);
            gen();
        }

        gen();

        $('.answer').click(() => {
            const name = $(event.target).attr('name');
            if (name == "finish") {
                timeUp();
                return;
            }
            const id = Number(name);
            if (id == correct) {
                points += 10;
                $('#question_body').css({ "border": "1vw solid green" });
                correctaudio.play();
            }
            else {
                points -= 5;
                $('#question_body').css({ "border": "1vw solid red" });
                wrong.play();
            }
            $('#score').text('Puan ' + points);
            gen();
        });

        $('#restart').click(() => {
            Restart();
        });

        $('.whichnumbers').change(() => {
            const id = Number($(event.target).attr('name'));
            if ($(event.target).is(':checked')) {
                available_numbers.push(id);
            }
            else {
                const index = available_numbers.indexOf(id);
                if (index > -1) {
                    available_numbers.splice(index, 1);
                }
            }
            gen();
        });

        $('.numberofoptions').change(() => {
            const id = Number(event.target.id[0]);
            if ($(event.target).is(':checked')) {
                number_of_options = id;
                if (id == 3) {
                    $('.three').hide();
                    console.log(3);
                } else if (id == 4) {
                    $('.three').show();
                    $('.four').hide();
                    console.log(4);
                } else {
                    $('.three').show();
                    console.log(5);
                }
            }
            gen();
        });

        $('.timing_set').change(() => {
            second_def = Number($('#dk').val()) * 60 + Number($('#sn').val());
        });

        setInterval(() => {
            seconds--;
            if ((seconds % 60) / 10 >= 1)
                $('#timer').text(Math.floor(seconds / 60) + ':' + (seconds % 60));
            else
                $('#timer').text(Math.floor(seconds / 60) + ':0' + (seconds % 60));

            if (seconds < 1)
                timeUp();
        }, 1000);

    </script>
</body>

</html>